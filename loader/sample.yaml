kind: MassExecute
type: http
output:
  enabled: true
  ids: 
    - outputLocalCSV
store_import:
  enabled: true
  object:
    - var: "value1"
      bucket_id: "bucketForApp"
      store_key: "users"
      key: "var1"
      # global or thread only(default: global)
      thread_only: true
    - var: "value2"
      bucket_id: "bucketForApp"
      store_key: "teams"
      key: "var2"
      encrypt:
        enabled: true
        encrypt_id: encryptDynamicCBC
auth: 
  enabled: true
  auth_id: authForWeb
requests:
  target_id: "apiServer"
  endpoint: "/api/v1/organizations"
  method: GET
  interval: 500ms
  awaitPrevResponse: false
  queryParam:
    limit: [10]
    offset: [0]
    cursor: [""]
    pagination: ["offset"]
    sortField: ["name"]
    sortOrder: ["asc"]
    withCount: [true]
    hasIsDefaultFilter: [false]
    filterIsDefault: [false]
    hasOrganizationFilter: [false]
    filterOrganizationIDs: []
    hasUserFilter: [false]
    filterUserIDs: []
    userFilterType: ["all"]
    with: []
  pathVariables: {}
  successBreak:
    - count
    - time
  break:
    time: 2m
    count: 5
    sysError: true
    parseError: true
    writeError: true
    statusCode:
      op: eq
      value: 500
  data:
    - key: "resultType"
      jmesPath: "data.resultType"
    - key: "memory_active"
      jmesPath: "data.result[*].value"
      onNil: "ignore" # cancel or ignore(default)
    - key: "invalid_key"
      jmesPath: "data.result[*].invalid_key"
      onNil: "ignore"
  dataOutputFilter:
    jmesPath: "code == '0002:0003'"